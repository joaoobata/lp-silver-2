(()=>{const t=t=>t?Object.fromEntries(t.substr(1).split("&").map(t=>t.split("=")).map(([t,e])=>[t,decodeURIComponent(e)])):{},e=Object.defineProperty,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,d=(t,e)=>{for(var d in e||(e={}))i.call(e,d)&&n(t,d,e[d]);if(s)for(var l of s(e))o.call(e,l)&&n(t,l,e[l]);return t},l=document.currentScript,a=t=>{const e=new URL(l.src);return e.pathname=e.pathname.replace(/\/[^\/]+$/,t),e.href};class c{constructor(t){const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);n(this,"isMobile",e),n(this,"options",t),n(this,"embedType",t.embedType),this.t()}i(){const t=new URL(this.url,window.location);return t.search=this.getQuery(),t.toString()}o(){return this.parent.getAttribute("data-url")}getQuery(){const e={};d(e,this.l()),d(e,t(new URL(this.url,window.location).search)),d(e,t(new URL(window.location.href).search)),n(e,"embedType",this.embedType),n(e,"referrerUrl",window.location.href);return`?${Object.entries(e).map(([t,e])=>`${t}=${encodeURIComponent(e)}`).join("&")}`}l(){const t=decodeURIComponent(document.cookie).split("; ");const e={};return["utm_campaign","utm_source","utm_medium","utm_content","utm_term","first_utm_campaign","first_utm_source","first_utm_medium","first_utm_content","first_utm_term","_fbp","_fbc"].forEach(s=>{const i=function(e){const s=t.find(t=>t.startsWith(e+"="));return s?s.split("=")[1]:void 0}(s);i&&(e[s]=i)}),e}format(){return this.p?this.h():this.m()}m(){this.u&&this.parent.setAttribute("style",`position: relative;${this.parent.getAttribute("style")}`)}h(){if(this.u){const t=`position: relative;-webkit-overflow-scrolling:touch;${this.parent.getAttribute("style")}`;this.parent.setAttribute("style",t)}this.parent.className+=" iclosed-mobile"}v(){window.addEventListener("message",t=>{["https://dev.iclosed.io","https://stage.iclosed.io","https://app.iclosed.io"].includes(t.origin)&&("iclosed.widget_height"===t.data.type&&(this.parent.style.height=t.data.height),"openInParentTab"===t.data.type&&window.open(t.data.url,"_self"),"scrollIntoView"===t.data.type&&this.parent.scrollIntoView({behavior:"smooth"}))})}}class r extends c{constructor(t){super(t)}t(){if(this.options=Object.assign({u:!1,resize:!1},this.options),this.parent=this.options.parentElement,!this.parent)throw new Error("iClosed: Parent element not set");if(this.parent._&&(this.parent=this.parent[0]),this.u=this.options.u,this.url=(this.options.url||this.o()).split("#")[0],this.resize=this.options.resize,!this.url)throw new Error("iClosed: Widget URL not set")}inject(){const t=this.j();this.parent.appendChild(t),this.P(),this.format(),this.v(),this.parent.appendChild(this.O),this.O.addEventListener("load",()=>{t.style.display="none",this.parent.removeChild(t)})}P(){this.O=document.createElement("iframe"),this.O.src=this.i(),this.O.width="100%",this.O.height="100%",this.O.frameBorder="0",this.O.sandbox="allow-scripts allow-downloads allow-same-origin allow-popups allow-forms allow-top-navigation allow-popups-to-escape-sandbox",this.O.title=this.parent.getAttribute("title")}j(){const t=document.createElement("div");return t.setAttribute("style","width: 100%; display: flex; justify-content: center; position: absolute; z-index: -1;"),t.innerHTML='\n                <div class="iclosed-loader-container">\n                    <div class="iclosed-loader-header">\n                        <div class="iclosed-placeholder"></div>\n                        <div class="iclosed-placeholder"></div>\n                    </div>\n                \n                    <div class="iclosed-loader-section">\n                        <div class="iclosed-placeholder iclosed-placeholder-large" style="width: 160px; margin-bottom: 16px;"></div>\n                \n                        <div class="iclosed-placeholder-group">\n                            <div class="iclosed-placeholder iclosed-placeholder-small" style="width: 80px; margin-bottom: 8px;"></div>\n                            <div class="iclosed-placeholder iclosed-placeholder-large" style="width: 240px;"></div>\n                        </div>\n                        <div class="iclosed-placeholder-group">\n                            <div class="iclosed-placeholder iclosed-placeholder-small" style="width: 80px; margin-bottom: 8px;"></div>\n                            <div class="iclosed-placeholder iclosed-placeholder-large" style="width: 240px;"></div>\n                        </div>\n\n                        <div class="iclosed-loader-button"></div>\n                    </div>\n                </div>\n            ',t}}class p extends c{constructor(t){super(t)}t(){if(this.url=this.options.url,!this.url)throw new Error("iClosed: Popup Widget link not set");this.parent=document.createElement("div"),this.parent.className="iclosed-popup-overlay"}U(){window.addEventListener("message",t=>{"iclosed.close_widget_popup"===t.data.type&&this.k()})}inject(){this.P(),this.format(),this.v(),this.U(),document.body.appendChild(this.parent),this.parent.addEventListener("click",t=>{t.target===this.parent&&(document.body.classList.remove("no-scroll"),this.parent.remove())})}P(){document.body.classList.add("no-scroll");const t=document.createElement("div");t.className="iclosed-popup-container";const e=document.createElement("div");e.className="iclosed-popup-content";const s=document.createElement("div");s.className="iclosed-popup-loader";const i=document.createElement("iframe");i.src=this.i(),i.width="100%",i.height="100%",i.frameBorder="0",i.sandbox="allow-scripts allow-downloads allow-same-origin allow-popups allow-forms allow-top-navigation allow-popups-to-escape-sandbox",i.style.display="none",e.appendChild(s),e.appendChild(i),t.appendChild(e),this.parent.appendChild(t),i.addEventListener("load",()=>{s.style.display="none",e.removeChild(s),i.style.display="block"})}k(){document.body.classList.remove("no-scroll"),this.parent.remove()}}class h extends c{constructor(t){super(t)}t(){if(this.parent=this.options.parentElement,!this.parent)throw new Error("CallDetailsWidget: Parent element not set");if(this.url=this.o()||this.options.url,!this.url)throw new Error("CallDetailsWidget: Widget URL not set")}C(){window.addEventListener("message",t=>{if("widget:hide"===t.data){const t=document.querySelector(".call-details-widget");t&&(t.style.display="none")}})}inject(){this.P(),this.C(),this.parent.appendChild(this.O)}P(){this.O=document.createElement("iframe"),this.O.src=this.i(),this.O.width="100%",this.O.height="100%",this.O.frameBorder="0",this.O.sandbox="allow-scripts allow-downloads allow-same-origin allow-popups allow-forms allow-top-navigation allow-popups-to-escape-sandbox",this.O.title=this.parent.getAttribute("title")||"Embedded Widget"}}var m;m=()=>{(()=>{if(!l)return;const t=document.createElement("link");t.rel="stylesheet",t.href=a("/widget.css"),document.head.appendChild(t)})();const t=document.querySelectorAll(".iclosed-widget");Array.from(t).forEach(async t=>{if(!t.getAttribute("data-processed")||"false"===t.getAttribute("data-auto-load")){if(t.setAttribute("data-processed",!0),t.getAttribute("data-load-delay")){const e=+String(t.getAttribute("data-load-delay")).replace(/\D/g,"");await new Promise(t=>setTimeout(t,e||1e3))}const e={};n(e,"parentElement",t),n(e,"inlineStyles",!0),n(e,"resize","true"===t.getAttribute("data-resize")),n(e,"embedType","inline"),new r(e).inject()}});const e=document.querySelectorAll("[data-iclosed-link]");Array.from(e).forEach(t=>{t.getAttribute("data-processed")||(t.setAttribute("data-processed",!0),t.addEventListener("click",()=>{const e={};n(e,"url",t.getAttribute("data-iclosed-link")),n(e,"embedType",t.getAttribute("data-embed-type")||"popup"),new p(e).inject()}))});const s=document.querySelectorAll(".call-details-widget");Array.from(s).forEach(t=>{if(!t.getAttribute("data-processed")){t.setAttribute("data-processed",!0);const e={};n(e,"parentElement",t),new h(e).inject()}});const i=l?.getAttribute("data-cta-widget");if(i){let t=document.getElementById("iclosed-cta-container");const e=t?.getAttribute("data-processed");if(e)return;t||(t=document.createElement("div"),t.id="iclosed-cta-container",document.body.appendChild(t)),t.setAttribute("data-processed",!0),window.addEventListener("message",t=>{if("iclosed.open_widget_popup"===t.data?.type){const e={};n(e,"url",t.data.url),n(e,"embedType","popup"),new p(e).inject()}});const s=t=>new Promise((e,s)=>{const i=document.createElement("script");i.src=t,i.onload=()=>e(),i.onerror=()=>s(new Error(`Failed to load ${src}`)),document.head.appendChild(i)}),o=document.createElement("link");o.setAttribute("rel","preload"),o.setAttribute("as","style"),o.setAttribute("href",a("/embeds/index.css")),document.head.appendChild(o),(async()=>{window.React||await s("https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"),window.ReactDOM||await s("https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js");const t=document.createElement("script");t.src=a("/embeds/cta-widget.js"),t.setAttribute("data-preview-id",i),document.head.appendChild(t)})().catch(t=>{console.error("Error loading CTA widget:",t)})}},["interactive","complete"].includes(document.readyState)?m():document.addEventListener("DOMContentLoaded",m)})();